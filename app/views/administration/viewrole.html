<div class="col-md-12" ng-controller="ViewRoleController">
    <ul class="breadcrumb">
        <li><a href="#/system">{{'label.anchor.system' | translate}}</a></li>
        <li><a href="#/admin/roles">{{'label.anchor.viewroles' | translate}}</a></li>
        <li ng-class="{active: isDisabled}">{{role.name}}</li>
        <li class="active" ng-hide="isDisabled">{{'label.anchor.editrole' | translate}}</li>
    </ul>

    <api-validate></api-validate>
    <form name="editroleform" class="form-horizontal" ng-submit="submit()">
        <legend ng-show="isDisabled">{{'label.anchor.viewrole' | translate}}</legend>
        <legend ng-hide="isDisabled">{{'label.anchor.editrole' | translate}}</legend>

        <div class="form-group">
            <label class="control-label col-sm-2">{{'label.heading.name' | translate}}</label>
            <span class="col-sm-3">{{role.name}}</span>

            <label class="control-label col-sm-2">{{'label.heading.description' | translate}}</label>
            <span class="col-sm-3">{{role.description}}</span>
        </div>

        <div class="pull-right" ng-show="isDisabled">
            <a class="btn btn-primary" ng-click="editRoles()" has-permission='UPDATE_ROLE'><i class="icon-edit icon-white"></i> {{'label.button.edit' | translate}}</a>
            <a class="btn btn-primary" ng-click="disableRolesConfirmation()" ng-hide="isRoleEnable(role.disabled)" has-permission='DISABLE_ROLE'><i class="icon-trash icon-white"></i> {{'label.button.disable' | translate}}</a>
            <a class="btn btn-primary" ng-click="enableRolesConfirmation()" ng-show="isRoleEnable(role.disabled)" has-permission='ENABLE_ROLE'><i class="icon-trash icon-white"></i> {{'label.button.enable' | translate}}</a>
            <a class="btn btn-primary" ng-click="deleteRolesConfirmation()" has-permission='DELETE_ROLE'><i class="icon-trash icon-white"></i> {{'label.button.delete' | translate}}</a>
        </div>

        <script type="text/ng-template" id="deleterole.html">
            <div class="modal-header silver">
                <h3 class="bolder">{{'label.heading.deleterole' | translate}}</h3>
            </div>
            <div class="modal-body">
                <br>
                <a class="btn btn-warning" ng-click="cancelDeleteRole()">{{'label.button.cancel' | translate}}</a>
                <a class="btn btn-primary" ng-click="deleteRoles()">{{'label.button.confirm' | translate}}</a>
            </div>
        </script>

        <script type="text/ng-template" id="disablerole.html">
            <div class="modal-header silver">
                <h3 class="bolder">{{'label.heading.disablerole' | translate}}</h3>
            </div>
            <div class="modal-body">
                <br>
                <a class="btn btn-warning" ng-click="cancelDisableRole()">{{'label.button.cancel' | translate}}</a>
                <a class="btn btn-primary" ng-click="disableRoles()">{{'label.button.confirm' | translate}}</a>
            </div>
        </script>

        <script type="text/ng-template" id="enablerole.html">
            <div class="modal-header silver">
                <h3 class="bolder">{{'label.heading.enablerole' | translate}}</h3>
            </div>
            <div class="modal-body">
                <br>
                <a class="btn btn-warning" ng-click="cancelEnableRole()">{{'label.button.cancel' | translate}}</a>
                <a class="btn btn-primary" ng-click="enableRoles()">{{'label.button.confirm' | translate}}</a>
            </div>
        </script>

        <h3>{{'label.heading.permissions' | translate}}: <strong>{{formatName(previousGrouping)}}</strong></h3>

        <div class="col-sm-3">
            <div ng-repeat="grouping in groupings">
                <a ng-class="{black: grouping == previousGrouping}" ng-click="showPermissions(grouping)">{{formatName(grouping)}}</a>
            </div>
        </div>

        <div class="col-sm-5">
            <div ng-repeat="permission in permissions.permissions">
                <label for="{{permission.code}}">{{permissionName(permission.code)}}</label>
                <input id="{{permission.code}}" type="checkbox" ng-model="formData[permission.code]" ng-disabled="isDisabled">
            </div>
        </div>

        <div class="pull-right" ng-hide="isDisabled">
            <a class="btn btn-default" ng-click="cancel()">{{'label.button.cancel' | translate}}</a>
            <button type="submit" class="btn btn-primary" has-permission='UPDATE_ROLE'>{{'label.button.save' | translate}}</button>
        </div>
    </form>
</div>